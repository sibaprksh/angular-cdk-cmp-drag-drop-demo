<div cdkDropList
    class="item-dropzone parent"
    [id]="parentItemId"
    [cdkDropListData]="parentItem"
    [cdkDropListConnectedTo]="allDropListsIds"
    (cdkDropListDropped)="itemDrop.emit($event)">
    <div cdkDrag
        [id]="item.uId"
        [cdkDragData]="item"
        [cdkDragDisabled]="dragDisabled" class="content-data">
        <div 
            class="item-drag-handle"
            cdkDragHandle style="opacity: 1">            
            <i *ngIf="!dragDisabled" title="Drag this item with children">
                <svg width="18px" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"></path>
                  <path d="M0 0h24v24H0z" fill="none"></path>
                </svg>
            </i>
            <i *ngIf="!dragDisabled" class="material-icons pointer" (click)="onDelete(item)" title="Delete this item with children">
                delete
            </i>
        </div>

        <ng-template #target></ng-template>

        <div class="item-drag-preview"
            *cdkDragPreview>
            {{item.name}} with {{item.children.length}} child item(s)
        </div>
    </div>

    
    <ng-container *ngIf="!parentItem">
      <ul cdkDropList
          class="item-dropzone"
          [id]="item.uId"
          [cdkDropListConnectedTo]="connectedDropListsIds"
          [cdkDropListData]="item"
          (cdkDropListDropped)="itemDrop.emit($event)">
          <li *ngFor="let subItem of item.children">
              <app-drop [item]="subItem"
                  [parentItem]="item"
                  [connectedDropListsIds]="allDropListsIds"
                  [parentInstance]="currentInstance"              
                  (itemDrop)="itemDrop.emit($event)">
              </app-drop>
          </li>
      </ul>
    </ng-container>
</div>